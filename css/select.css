/*
CSS para ManGoApp
SELECT (basado en TEXT FIELD MD3)
Autor: Danny Estrada
*/

/* Wrapper */
.rdm-select--wrapper {
  display: block;
  width: 100%;
  margin: 1em 0;
}

.rdm-select--container {
  display: block;
  width: 100%;
}

/* Outlined */
.rdm-select--outlined {
  position: relative;
  border-radius: 0.25em;
  background-color: transparent;
  border: 0.0625em solid var(--md-sys-color-outline);
  color: var(--md-sys-color-on-surface);
  transition: border-color 160ms ease, box-shadow 160ms ease;
}

/* Hover state */
.rdm-select--outlined:hover:not(:focus-within):not(:has(select:disabled)) {
  border-color: var(--md-sys-color-on-surface);
}

/* Control container */
.rdm-select--control {
  position: relative;
  padding: 0em 0.75em;
  display: flex;
  align-items: center;
  gap: 1em;
  min-height: 3.5em; /* 56px */
}

/* Leading icon */
.rdm-select--leading-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--md-sys-color-on-surface-variant);
  flex-shrink: 0;
  width: 1.5em;
  height: 1.5em;
}

.rdm-select--leading-icon .material-symbols-rounded {
  font-variation-settings: 'FILL' 0;
}

/* Trailing icon (arrow) - SIEMPRE visible */
.rdm-select--trailing-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--md-sys-color-on-surface-variant);
  flex-shrink: 0;
  width: 1.5em;
  height: 1.5em;
  pointer-events: none; /* el click pasa al select */
  transition: transform 160ms ease;
}

.rdm-select--trailing-icon .material-symbols-rounded {
  font-variation-settings: 'FILL' 0;
}

/* Rotar flecha cuando está abierto */
.rdm-select--container:focus-within .rdm-select--trailing-icon {
  transform: rotate(180deg);
}

/* Select nativo */
.rdm-select--control select {
  display: block;
  width: 100%;
  box-sizing: border-box;
  border: none;
  outline: none !important;
  background: transparent;
  color: var(--md-sys-color-on-surface);
  font: inherit;
  padding: 0;
  line-height: 1.5em;
  cursor: pointer;
  flex: 1;
  min-width: 0;
  /* Ocultar la flecha nativa del select */
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

/* Select sin valor = texto como placeholder (más tenue) */
.rdm-select--control select:invalid {
  color: var(--md-sys-color-on-surface-variant);
}

/* Cuando tiene valor = texto normal */
.rdm-select--control select:valid {
  color: var(--md-sys-color-on-surface);
}

/* Ocultar flecha nativa en IE */
.rdm-select--control select::-ms-expand {
  display: none;
}

/* Options del select */
.rdm-select--control select option {
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  padding: 0.75em 1em;
}

/* Optgroup styling */
.rdm-select--control select optgroup {
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface-variant);
  font-weight: 600;
  font-size: 0.875em;
  padding: 0.5em 1em;
}

.rdm-select--control select optgroup option {
  padding-left: 1.5em; /* indent para opciones dentro del grupo */
  font-weight: 400;
  font-size: 1rem;
  color: var(--md-sys-color-on-surface);
}

/* Label flotante */
.rdm-select--label {
  position: absolute;
  left: 1em;
  top: 50%;
  transform: translateY(-50%);
  transform-origin: left top;
  transition: transform 160ms ease, color 160ms ease, background-color 160ms ease, top 160ms ease, left 160ms ease;
  color: var(--md-sys-color-on-surface-variant);
  pointer-events: none;
  background-color: var(--md-sys-color-surface);
  padding: 0 0.25em;
  z-index: 0;
}

/* Label con leading icon: mover a la derecha */
.rdm-select--control:has(.rdm-select--leading-icon) .rdm-select--label {
  left: 3.25em; /* 52px: padding + icono + gap */
}

/* Label flotante cuando tiene valor o está focused */
.rdm-select--container:focus-within .rdm-select--label,
.rdm-select--control select:not([value=""]) ~ .rdm-select--label,
.rdm-select--control select:valid ~ .rdm-select--label {
  top: -0.8em;
  transform: scale(0.85);
  left: 1em;
  padding: 0.25em 0.25em;
  color: var(--md-sys-color-primary);
}

/* Label flotante con leading icon */
.rdm-select--outlined:focus-within .rdm-select--control:has(.rdm-select--leading-icon) .rdm-select--label,
.rdm-select--outlined .rdm-select--control:has(.rdm-select--leading-icon) select:not([value=""]) ~ .rdm-select--label,
.rdm-select--outlined .rdm-select--control:has(.rdm-select--leading-icon) select:valid ~ .rdm-select--label {
  left: 1em; /* cuando flota, vuelve a 16px desde el borde */
}

/* Focus state */
.rdm-select--outlined:focus-within {
  border-color: var(--md-sys-color-primary);
  box-shadow: inset 0 0 0 0.0625em var(--md-sys-color-primary);
}

/* Support text */
.rdm-select--support {
  padding: 0.25em 1em 0;
  color: var(--md-sys-color-on-surface-variant);
  font-size: 0.875em;
  margin-top: 0.25em;
}

/* Error state */
.rdm-select--wrapper.is-error .rdm-select--label,
.rdm-select--wrapper.is-error .rdm-select--support {
  color: var(--md-sys-color-error);
}

.rdm-select--wrapper.is-error .rdm-select--outlined {
  border-color: var(--md-sys-color-error);
}

/* Validación HTML5: estado invalid automático */
.rdm-select--outlined:has(select:invalid:not(:focus)) {
  border-color: var(--md-sys-color-error);
}

.rdm-select--container:has(select:invalid:not(:focus)) .rdm-select--label {
  color: var(--md-sys-color-error);
}

/* No mostrar error en disabled */
.rdm-select--outlined:has(select:invalid:disabled) {
  border-color: var(--md-sys-color-outline);
}

.rdm-select--container:has(select:invalid:disabled) .rdm-select--label {
  color: color-mix(in srgb, var(--md-sys-color-on-surface-variant) 65%, transparent);
}

/* Disabled state */
.rdm-select--control select:disabled {
  opacity: 0.65;
  cursor: not-allowed;
}

.rdm-select--outlined:has(select:disabled) {
  opacity: 0.65;
}

.rdm-select--outlined:has(select:disabled) .rdm-select--label {
  opacity: 1;
  color: color-mix(in srgb, var(--md-sys-color-on-surface-variant) 65%, transparent);
  background-color: var(--md-sys-color-surface) !important;
}

.rdm-select--control:has(select:disabled) .rdm-select--leading-icon,
.rdm-select--control:has(select:disabled) .rdm-select--trailing-icon {
  opacity: 0.65;
}

.rdm-select--wrapper:has(select:disabled) .rdm-select--support {
  opacity: 0.65;
}

/* Fieldset pattern para agrupar múltiples selects */
.rdm-select--fieldset {
  border: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5em;
}

.rdm-select--fieldset legend {
  padding: 0;
  margin: 0;
  margin-bottom: 0.5em;
  color: var(--md-sys-color-on-surface);
  font-weight: 500;
}

.rdm-select--fieldset .rdm-select--wrapper {
  margin: 0; /* el gap del fieldset maneja el espaciado */
}
